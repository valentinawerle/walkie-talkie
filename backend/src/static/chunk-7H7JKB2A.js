import{$ as Pe,A as y,B as Ee,C as Ce,D as Fe,E as Ie,F as Se,G as we,H as Te,I as P,J as G,L as U,M as Z,N as K,O as W,P as I,Q as Le,R as ke,Y as Re,_ as Ae,a as ce,aa as He,b as p,c as ue,d as pe,e as he,f as fe,g as _e,h as R,i as ge,j as ve,k as xe,m as A,na as Ne,o as j,q as Me,t as be,x as ye}from"./chunk-TIWTII7I.js";import{$ as D,Aa as l,Ba as o,Ca as n,Da as _,Fa as O,Ga as re,Gb as me,Ha as x,Ia as F,J,Jb as de,K as M,L as T,N as c,P as H,Q as N,Ua as ne,Wa as m,X as Q,Ya as z,Z as ee,_a as oe,c as $,fa as s,fb as ae,h as w,ha as te,ia as B,j as X,ja as C,lb as q,na as L,oa as b,pa as V,ra as f,sb as se,ta as k,vb as le,xa as ie}from"./chunk-56KM5BMF.js";var E=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=b({type:i});static \u0275inj=M({imports:[y,be,I,y]})}return i})();var Ge=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=L({type:i,selectors:[["ng-component"]],hostAttrs:["cdk-text-field-style-loader",""],decls:0,vars:0,template:function(t,r){},styles:[`textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{padding:2px 0 !important;box-sizing:content-box !important;height:auto !important;overflow:hidden !important}textarea.cdk-textarea-autosize-measuring-firefox{padding:2px 0 !important;box-sizing:content-box !important;height:0 !important}@keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}
`],encapsulation:2,changeDetection:0})}return i})(),Ue={passive:!0},De=(()=>{class i{_platform=c(A);_ngZone=c(k);_renderer=c(te).createRenderer(null,null);_styleLoader=c(Me);_monitoredElements=new Map;constructor(){}monitor(e){if(!this._platform.isBrowser)return X;this._styleLoader.load(Ge);let t=j(e),r=this._monitoredElements.get(t);if(r)return r.subject;let u=new w,d="cdk-text-field-autofilled",g=v=>{v.animationName==="cdk-text-field-autofill-start"&&!t.classList.contains(d)?(t.classList.add(d),this._ngZone.run(()=>u.next({target:v.target,isAutofilled:!0}))):v.animationName==="cdk-text-field-autofill-end"&&t.classList.contains(d)&&(t.classList.remove(d),this._ngZone.run(()=>u.next({target:v.target,isAutofilled:!1})))},S=this._ngZone.runOutsideAngular(()=>(t.classList.add("cdk-text-field-autofill-monitored"),this._renderer.listen(t,"animationstart",g,Ue)));return this._monitoredElements.set(t,{subject:u,unlisten:S}),u}stopMonitoring(e){let t=j(e),r=this._monitoredElements.get(t);r&&(r.unlisten(),r.subject.complete(),t.classList.remove("cdk-text-field-autofill-monitored"),t.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(t))}ngOnDestroy(){this._monitoredElements.forEach((e,t)=>this.stopMonitoring(t))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=J({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Be=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=b({type:i});static \u0275inj=M({})}return i})();var Ve=new T("MAT_INPUT_VALUE_ACCESSOR");var Ze=["button","checkbox","file","hidden","image","radio","range","reset","submit"],Ke=new T("MAT_INPUT_CONFIG"),Oe=(()=>{class i{_elementRef=c(D);_platform=c(A);ngControl=c(ue,{optional:!0,self:!0});_autofillMonitor=c(De);_ngZone=c(k);_formField=c(W,{optional:!0});_renderer=c(B);_uid=c(ye).getId("mat-input-");_previousNativeValue;_inputValueAccessor;_signalBasedValueAccessor;_previousPlaceholder;_errorStateTracker;_config=c(Ke,{optional:!0});_cleanupIosKeyup;_cleanupWebkitWheel;_isServer;_isNativeSelect;_isTextarea;_isInFormField;focused=!1;stateChanges=new w;controlType="mat-input";autofilled=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=P(e),this.focused&&(this.focused=!1,this.stateChanges.next())}_disabled=!1;get id(){return this._id}set id(e){this._id=e||this._uid}_id;placeholder;name;get required(){return this._required??this.ngControl?.control?.hasValidator(p.required)??!1}set required(e){this._required=P(e)}_required;get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&G().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}_type="text";get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}userAriaDescribedBy;get value(){return this._signalBasedValueAccessor?this._signalBasedValueAccessor.value():this._inputValueAccessor.value}set value(e){e!==this.value&&(this._signalBasedValueAccessor?this._signalBasedValueAccessor.value.set(e):this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=P(e)}_readonly=!1;disabledInteractive;get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}_neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(e=>G().has(e));constructor(){let e=c(fe,{optional:!0}),t=c(R,{optional:!0}),r=c(Le),u=c(Ve,{optional:!0,self:!0}),d=this._elementRef.nativeElement,g=d.nodeName.toLowerCase();u?Q(u.value)?this._signalBasedValueAccessor=u:this._inputValueAccessor=u:this._inputValueAccessor=d,this._previousNativeValue=this.value,this.id=this.id,this._platform.IOS&&this._ngZone.runOutsideAngular(()=>{this._cleanupIosKeyup=this._renderer.listen(d,"keyup",this._iOSKeyupListener)}),this._errorStateTracker=new ke(r,this.ngControl,t,e,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=g==="select",this._isTextarea=g==="textarea",this._isInFormField=!!this._formField,this.disabledInteractive=this._config?.disabledInteractive||!1,this._isNativeSelect&&(this.controlType=d.multiple?"mat-native-select-multiple":"mat-native-select"),this._signalBasedValueAccessor&&ae(()=>{this._signalBasedValueAccessor.value(),this.stateChanges.next()})}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._cleanupIosKeyup?.(),this._cleanupWebkitWheel?.()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(e){if(e!==this.focused){if(!this._isNativeSelect&&e&&this.disabled&&this.disabledInteractive){let t=this._elementRef.nativeElement;t.type==="number"?(t.type="text",t.setSelectionRange(0,0),t.type="number"):t.setSelectionRange(0,0)}this.focused=e,this.stateChanges.next()}}_onInput(){}_dirtyCheckNativeValue(){let e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){let e=this._getPlaceholder();if(e!==this._previousPlaceholder){let t=this._elementRef.nativeElement;this._previousPlaceholder=e,e?t.setAttribute("placeholder",e):t.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Ze.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let e=this._elementRef.nativeElement,t=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&t&&t.label)}else return this.focused&&!this.disabled||!this.empty}get describedByIds(){return this._elementRef.nativeElement.getAttribute("aria-describedby")?.split(" ")||[]}setDescribedByIds(e){let t=this._elementRef.nativeElement;e.length?t.setAttribute("aria-describedby",e.join(" ")):t.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}_iOSKeyupListener=e=>{let t=e.target;!t.value&&t.selectionStart===0&&t.selectionEnd===0&&(t.setSelectionRange(1,1),t.setSelectionRange(0,0))};_getReadonlyAttribute(){return this._isNativeSelect?null:this.readonly||this.disabled&&this.disabledInteractive?"true":null}static \u0275fac=function(t){return new(t||i)};static \u0275dir=V({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:21,hostBindings:function(t,r){t&1&&x("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),t&2&&(re("id",r.id)("disabled",r.disabled&&!r.disabledInteractive)("required",r.required),ie("name",r.name||null)("readonly",r._getReadonlyAttribute())("aria-disabled",r.disabled&&r.disabledInteractive?"true":null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),ne("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mat-mdc-input-disabled-interactive",r.disabledInteractive)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly",disabledInteractive:[2,"disabledInteractive","disabledInteractive",q]},exportAs:["matInput"],features:[oe([{provide:K,useExisting:i}]),ee]})}return i})(),ze=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=b({type:i});static \u0275inj=M({imports:[y,E,E,Be,y]})}return i})();function Ye(i,a){i&1&&(o(0,"mat-error"),m(1," El email es requerido "),n())}function $e(i,a){i&1&&(o(0,"mat-error"),m(1," Ingresa un email v\xE1lido "),n())}function Xe(i,a){i&1&&(o(0,"mat-error"),m(1," La contrase\xF1a es requerida "),n())}function Je(i,a){i&1&&(o(0,"mat-error"),m(1," La contrase\xF1a debe tener al menos 6 caracteres "),n())}function Qe(i,a){i&1&&_(0,"mat-spinner",11)}function et(i,a){i&1&&(o(0,"span"),m(1,"Iniciar Sesi\xF3n"),n())}function tt(i,a){if(i&1){let e=O();o(0,"form",4),x("ngSubmit",function(){H(e);let r=F();return N(r.onLogin())}),o(1,"mat-form-field",5)(2,"mat-label"),m(3,"Email"),n(),_(4,"input",6),f(5,Ye,2,0,"mat-error",7)(6,$e,2,0,"mat-error",7),n(),o(7,"mat-form-field",5)(8,"mat-label"),m(9,"Contrase\xF1a"),n(),_(10,"input",8),f(11,Xe,2,0,"mat-error",7)(12,Je,2,0,"mat-error",7),n(),o(13,"button",9),f(14,Qe,1,0,"mat-spinner",10)(15,et,2,0,"span",7),n()()}if(i&2){let e,t,r,u,d=F();l("formGroup",d.loginForm),s(5),l("ngIf",(e=d.loginForm.get("email"))==null?null:e.hasError("required")),s(),l("ngIf",(t=d.loginForm.get("email"))==null?null:t.hasError("email")),s(5),l("ngIf",(r=d.loginForm.get("password"))==null?null:r.hasError("required")),s(),l("ngIf",(u=d.loginForm.get("password"))==null?null:u.hasError("minlength")),s(),l("disabled",d.loginForm.invalid||d.isLoading),s(),l("ngIf",d.isLoading),s(),l("ngIf",!d.isLoading)}}function it(i,a){i&1&&(o(0,"mat-error"),m(1," El nombre de usuario es requerido "),n())}function rt(i,a){i&1&&(o(0,"mat-error"),m(1," El nombre debe tener al menos 3 caracteres "),n())}function nt(i,a){i&1&&(o(0,"mat-error"),m(1," El email es requerido "),n())}function ot(i,a){i&1&&(o(0,"mat-error"),m(1," Ingresa un email v\xE1lido "),n())}function at(i,a){i&1&&(o(0,"mat-error"),m(1," La contrase\xF1a es requerida "),n())}function st(i,a){i&1&&(o(0,"mat-error"),m(1," La contrase\xF1a debe tener al menos 6 caracteres "),n())}function lt(i,a){i&1&&(o(0,"mat-error"),m(1," Confirma tu contrase\xF1a "),n())}function mt(i,a){i&1&&(o(0,"mat-error"),m(1," Las contrase\xF1as no coinciden "),n())}function dt(i,a){i&1&&_(0,"mat-spinner",11)}function ct(i,a){i&1&&(o(0,"span"),m(1,"Registrarse"),n())}function ut(i,a){if(i&1){let e=O();o(0,"form",4),x("ngSubmit",function(){H(e);let r=F();return N(r.onRegister())}),o(1,"mat-form-field",5)(2,"mat-label"),m(3,"Nombre de usuario"),n(),_(4,"input",12),f(5,it,2,0,"mat-error",7)(6,rt,2,0,"mat-error",7),n(),o(7,"mat-form-field",5)(8,"mat-label"),m(9,"Email"),n(),_(10,"input",6),f(11,nt,2,0,"mat-error",7)(12,ot,2,0,"mat-error",7),n(),o(13,"mat-form-field",5)(14,"mat-label"),m(15,"Contrase\xF1a"),n(),_(16,"input",8),f(17,at,2,0,"mat-error",7)(18,st,2,0,"mat-error",7),n(),o(19,"mat-form-field",5)(20,"mat-label"),m(21,"Confirmar contrase\xF1a"),n(),_(22,"input",13),f(23,lt,2,0,"mat-error",7)(24,mt,2,0,"mat-error",7),n(),o(25,"button",9),f(26,dt,1,0,"mat-spinner",10)(27,ct,2,0,"span",7),n()()}if(i&2){let e,t,r,u,d,g,S,v,h=F();l("formGroup",h.registerForm),s(5),l("ngIf",(e=h.registerForm.get("username"))==null?null:e.hasError("required")),s(),l("ngIf",(t=h.registerForm.get("username"))==null?null:t.hasError("minlength")),s(5),l("ngIf",(r=h.registerForm.get("email"))==null?null:r.hasError("required")),s(),l("ngIf",(u=h.registerForm.get("email"))==null?null:u.hasError("email")),s(5),l("ngIf",(d=h.registerForm.get("password"))==null?null:d.hasError("required")),s(),l("ngIf",(g=h.registerForm.get("password"))==null?null:g.hasError("minlength")),s(5),l("ngIf",(S=h.registerForm.get("confirmPassword"))==null?null:S.hasError("required")),s(),l("ngIf",(v=h.registerForm.get("confirmPassword"))==null?null:v.hasError("passwordMismatch")),s(),l("disabled",h.registerForm.invalid||h.isLoading),s(),l("ngIf",h.isLoading),s(),l("ngIf",!h.isLoading)}}var qe=class i{constructor(a,e,t,r){this.fb=a;this.authService=e;this.router=t;this.snackBar=r;this.loginForm=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]}),this.registerForm=this.fb.group({username:["",[p.required,p.minLength(3)]],email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]],confirmPassword:["",[p.required]]},{validators:this.passwordMatchValidator})}loginForm;registerForm;isLoading=!1;isRegisterMode=!1;passwordMatchValidator(a){let e=a.get("password"),t=a.get("confirmPassword");return e&&t&&e.value!==t.value?(t.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):null}onLogin(){this.loginForm.valid&&(this.isLoading=!0,this.authService.login(this.loginForm.value).subscribe({next:()=>{this.router.navigate(["/rooms"]),this.snackBar.open("\xA1Inicio de sesi\xF3n exitoso!","Cerrar",{duration:3e3})},error:a=>{this.isLoading=!1,this.snackBar.open(a.error?.message||"Error al iniciar sesi\xF3n","Cerrar",{duration:5e3})}}))}onRegister(){if(this.registerForm.valid){this.isLoading=!0;let a=this.registerForm.value,{confirmPassword:e}=a,t=$(a,["confirmPassword"]);this.authService.register(t).subscribe({next:()=>{this.isLoading=!1,this.snackBar.open("\xA1Registro exitoso! Ahora puedes iniciar sesi\xF3n.","Cerrar",{duration:5e3}),this.isRegisterMode=!1,this.registerForm.reset()},error:r=>{this.isLoading=!1,this.snackBar.open(r.error?.message||"Error al registrar usuario","Cerrar",{duration:5e3})}})}}toggleMode(){this.isRegisterMode=!this.isRegisterMode,this.loginForm.reset(),this.registerForm.reset()}static \u0275fac=function(e){return new(e||i)(C(ve),C(de),C(me),C(Ne))};static \u0275cmp=L({type:i,selectors:[["app-login"]],decls:14,vars:5,consts:[[1,"login-container"],[1,"login-card"],[3,"formGroup","ngSubmit",4,"ngIf"],["mat-button","","color","accent",3,"click","disabled"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","email","type","email","placeholder","tu@email.com"],[4,"ngIf"],["matInput","","formControlName","password","type","password","placeholder","Tu contrase\xF1a"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],["diameter","20",4,"ngIf"],["diameter","20"],["matInput","","formControlName","username","placeholder","Tu nombre de usuario"],["matInput","","formControlName","confirmPassword","type","password","placeholder","Confirma tu contrase\xF1a"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title")(4,"h1"),m(5,"\u{1F3A4} Walkie-Talkie"),n()(),o(6,"mat-card-subtitle"),m(7),n()(),o(8,"mat-card-content"),f(9,tt,16,8,"form",2)(10,ut,28,12,"form",2),n(),o(11,"mat-card-actions")(12,"button",3),x("click",function(){return t.toggleMode()}),m(13),n()()()()),e&2&&(s(7),z(" ",t.isRegisterMode?"Crear nueva cuenta":"Iniciar sesi\xF3n"," "),s(2),l("ngIf",!t.isRegisterMode),s(),l("ngIf",t.isRegisterMode),s(2),l("disabled",t.isLoading),s(),z(" ",t.isRegisterMode?"\xBFYa tienes cuenta? Inicia sesi\xF3n":"\xBFNo tienes cuenta? Reg\xEDstrate"," "))},dependencies:[le,se,xe,_e,ce,pe,he,R,ge,Te,Ee,Se,Fe,we,Ie,Ce,E,I,U,Z,ze,Oe,Ae,Re,He,Pe],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.login-card[_ngcontent-%COMP%]{max-width:400px;width:100%;padding:20px;box-shadow:0 8px 32px #0000001a;border-radius:16px;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.login-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;margin:0 0 10px;font-size:2rem;font-weight:700;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}mat-card-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:16px 0 0}button[mat-raised-button][_ngcontent-%COMP%]{height:48px;font-size:16px;font-weight:500;border-radius:8px;margin-top:16px}button[mat-button][_ngcontent-%COMP%]{font-size:14px}mat-form-field[_ngcontent-%COMP%]{margin-bottom:8px}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:10px}.login-card[_ngcontent-%COMP%]{padding:16px}.login-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}"]})};export{qe as LoginComponent};
