import{a as Rt,b as Tt,c as Dt,d as zt,e as Ft,f as Bt,g as jt,h as Ut}from"./chunk-HY2SR5SR.js";import{$ as Lt,A as M,B as ut,C as bt,D as ft,G as vt,H as xt,I as E,K as kt,S as wt,T as yt,V as Ct,W as Mt,X as St,Y as Ot,Z as At,_ as It,aa as Et,m as dt,n as ht,na as Pt,q as pt,s as gt,t as _t}from"./chunk-TIWTII7I.js";import{$ as B,$a as it,Aa as d,Ba as s,Ca as a,Da as D,Eb as ct,Fa as z,Gb as mt,Ha as b,Ia as p,Ja as V,Jb as lt,K as O,Ka as v,L as j,La as L,Ma as N,N as h,Na as x,Oa as k,P as g,Q as _,T as Z,Ta as Y,Ua as C,Wa as r,Xa as F,Y as U,Ya as f,Za as tt,_ as P,_a as et,ab as ot,e as $,f as G,fa as c,ja as w,na as A,oa as I,pa as u,qa as R,ra as y,rb as nt,s as X,sb as at,ta as J,ub as rt,vb as st,xa as T}from"./chunk-56KM5BMF.js";var Vt=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=I({type:o});static \u0275inj=O({imports:[M,M]})}return o})();var Nt=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=I({type:o});static \u0275inj=O({imports:[M]})}return o})();var $t=["*"],Gt=`.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:"";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}
`,Xt=["unscopedContent"],Zt=["text"],Jt=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],Yt=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var te=new j("ListOption"),H=(()=>{class o{_elementRef=h(B);constructor(){}static \u0275fac=function(e){return new(e||o)};static \u0275dir=u({type:o,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]})}return o})(),ee=(()=>{class o{_elementRef=h(B);constructor(){}static \u0275fac=function(e){return new(e||o)};static \u0275dir=u({type:o,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]})}return o})(),ie=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275dir=u({type:o,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]})}return o})(),Qt=(()=>{class o{_listOption=h(te,{optional:!0});constructor(){}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}static \u0275fac=function(e){return new(e||o)};static \u0275dir=u({type:o,hostVars:4,hostBindings:function(e,n){e&2&&C("mdc-list-item__start",n._isAlignedAtStart())("mdc-list-item__end",!n._isAlignedAtStart())}})}return o})(),oe=(()=>{class o extends Qt{static \u0275fac=(()=>{let t;return function(n){return(t||(t=P(o)))(n||o)}})();static \u0275dir=u({type:o,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[R]})}return o})(),W=(()=>{class o extends Qt{static \u0275fac=(()=>{let t;return function(n){return(t||(t=P(o)))(n||o)}})();static \u0275dir=u({type:o,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[R]})}return o})(),ne=new j("MAT_LIST_CONFIG"),K=(()=>{class o{_isNonInteractive=!0;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=E(t)}_disableRipple=!1;get disabled(){return this._disabled()}set disabled(t){this._disabled.set(E(t))}_disabled=U(!1);_defaultOptions=h(ne,{optional:!0});static \u0275fac=function(e){return new(e||o)};static \u0275dir=u({type:o,hostVars:1,hostBindings:function(e,n){e&2&&T("aria-disabled",n.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}})}return o})(),ae=(()=>{class o{_elementRef=h(B);_ngZone=h(J);_listBase=h(K,{optional:!0});_platform=h(dt);_hostElement;_isButtonElement;_noopAnimations=kt();_avatars;_icons;set lines(t){this._explicitLines=ht(t,null),this._updateItemLines(!1)}_explicitLines=null;get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(t){this._disableRipple=E(t)}_disableRipple=!1;get disabled(){return this._disabled()||!!this._listBase?.disabled}set disabled(t){this._disabled.set(E(t))}_disabled=U(!1);_subscriptions=new G;_rippleRenderer=null;_hasUnscopedTextContent=!1;rippleConfig;get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(){h(pt).load(Ct);let t=h(yt,{optional:!0});this.rippleConfig=t||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._listBase&&!this._listBase._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new wt(this,this._ngZone,this._hostElement,this._platform,h(Z)),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(X(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(t){if(!this._lines||!this._titles||!this._unscopedContent)return;t&&this._checkDomForUnscopedTextContent();let e=this._explicitLines??this._inferLinesFromContent(),n=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",e<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",e<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",e===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",e===3),this._hasUnscopedTextContent){let m=this._titles.length===0&&e===1;n.classList.toggle("mdc-list-item__primary-text",m),n.classList.toggle("mdc-list-item__secondary-text",!m)}else n.classList.remove("mdc-list-item__primary-text"),n.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let t=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(t+=1),t}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(t=>t.nodeType!==t.COMMENT_NODE).some(t=>!!(t.textContent&&t.textContent.trim()))}static \u0275fac=function(e){return new(e||o)};static \u0275dir=u({type:o,contentQueries:function(e,n,m){if(e&1&&(L(m,oe,4),L(m,W,4)),e&2){let l;x(l=k())&&(n._avatars=l),x(l=k())&&(n._icons=l)}},hostVars:4,hostBindings:function(e,n){e&2&&(T("aria-disabled",n.disabled)("disabled",n._isButtonElement&&n.disabled||null),C("mdc-list-item--disabled",n.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}})}return o})();var Kt=(()=>{class o extends K{static \u0275fac=(()=>{let t;return function(n){return(t||(t=P(o)))(n||o)}})();static \u0275cmp=A({type:o,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],features:[et([{provide:K,useExisting:o}]),R],ngContentSelectors:$t,decls:1,vars:0,template:function(e,n){e&1&&(V(),v(0))},styles:[Gt],encapsulation:2,changeDetection:0})}return o})(),Ht=(()=>{class o extends ae{_lines;_titles;_meta;_unscopedContent;_itemText;get activated(){return this._activated}set activated(t){this._activated=E(t)}_activated=!1;_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}_hasBothLeadingAndTrailing(){return this._meta.length!==0&&(this._avatars.length!==0||this._icons.length!==0)}static \u0275fac=(()=>{let t;return function(n){return(t||(t=P(o)))(n||o)}})();static \u0275cmp=A({type:o,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(e,n,m){if(e&1&&(L(m,ee,5),L(m,H,5),L(m,ie,5)),e&2){let l;x(l=k())&&(n._lines=l),x(l=k())&&(n._titles=l),x(l=k())&&(n._meta=l)}},viewQuery:function(e,n){if(e&1&&(N(Xt,5),N(Zt,5)),e&2){let m;x(m=k())&&(n._unscopedContent=m.first),x(m=k())&&(n._itemText=m.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:13,hostBindings:function(e,n){e&2&&(T("aria-current",n._getAriaCurrent()),C("mdc-list-item--activated",n.activated)("mdc-list-item--with-leading-avatar",n._avatars.length!==0)("mdc-list-item--with-leading-icon",n._icons.length!==0)("mdc-list-item--with-trailing-meta",n._meta.length!==0)("mat-mdc-list-item-both-leading-and-trailing",n._hasBothLeadingAndTrailing())("_mat-animation-noopable",n._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[R],ngContentSelectors:Yt,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-focus-indicator"]],template:function(e,n){if(e&1){let m=z();V(Jt),v(0),s(1,"span",1),v(2,1),v(3,2),s(4,"span",2,0),b("cdkObserveContent",function(){return g(m),_(n._updateItemLines(!0))}),v(6,3),a()(),v(7,4),v(8,5),D(9,"div",3)}},dependencies:[gt],encapsulation:2,changeDetection:0})}return o})();var Wt=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=I({type:o});static \u0275inj=O({imports:[_t,M,St,Nt,Vt]})}return o})();function se(o,i){o&1&&(s(0,"div",13),D(1,"mat-spinner",14),s(2,"p"),r(3,"Cargando sala..."),a()())}function ce(o,i){o&1&&(s(0,"mat-chip",36)(1,"mat-icon"),r(2,"mic"),a(),r(3," Hablando "),a())}function me(o,i){o&1&&(s(0,"mat-chip",37)(1,"mat-icon"),r(2,"volume_up"),a(),r(3," Audio "),a())}function le(o,i){o&1&&(s(0,"mat-chip",38)(1,"mat-icon"),r(2,"admin_panel_settings"),a(),r(3," Admin "),a())}function de(o,i){if(o&1&&(s(0,"mat-list-item",30)(1,"mat-icon",31),r(2,"person"),a(),s(3,"div",32),r(4),y(5,ce,4,0,"mat-chip",33)(6,me,4,0,"mat-chip",34)(7,le,4,0,"mat-chip",35),a()()),o&2){let t=i.$implicit,e=p(2);c(4),f(" ",t.username," "),c(),d("ngIf",e.speakingUsers.has(t.username)),c(),d("ngIf",e.audioReceivedUsers.has(t.username)),c(),d("ngIf",e.isUserAdmin(t))}}function he(o,i){if(o&1){let t=z();s(0,"button",39),b("click",function(){g(t);let n=p(2);return _(n.activateAudio())}),s(1,"mat-icon"),r(2,"volume_up"),a(),r(3," Activar Audio "),a()}}function pe(o,i){o&1&&(s(0,"div",40)(1,"mat-icon",41),r(2,"radio_button_checked"),a(),s(3,"span"),r(4,"Est\xE1s hablando..."),a()())}function ge(o,i){if(o&1){let t=z();s(0,"div",15)(1,"mat-card",16)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),r(5,"group"),a(),r(6),a()(),s(7,"mat-card-content")(8,"mat-list"),y(9,de,8,4,"mat-list-item",17),a()()(),s(10,"mat-card",18)(11,"mat-card-header")(12,"mat-card-title")(13,"mat-icon"),r(14,"mic"),a(),r(15," Controles de Voz "),a()(),s(16,"mat-card-content")(17,"div",19)(18,"div",20)(19,"button",21),b("mousedown",function(){g(t);let n=p();return _(n.startSpeaking())})("mouseup",function(){g(t);let n=p();return _(n.stopSpeaking())})("mouseleave",function(){g(t);let n=p();return _(n.stopSpeaking())})("touchstart",function(){g(t);let n=p();return _(n.startSpeaking())})("touchend",function(){g(t);let n=p();return _(n.stopSpeaking())}),s(20,"mat-icon"),r(21),a()()(),s(22,"div",22)(23,"button",23),b("click",function(){g(t);let n=p();return _(n.testAudio())}),s(24,"mat-icon"),r(25,"play_arrow"),a(),r(26," Test Audio "),a(),y(27,he,4,0,"button",24),a(),y(28,pe,5,0,"div",25),a(),s(29,"div",26)(30,"p")(31,"strong"),r(32,"Instrucciones:"),a()(),s(33,"ul")(34,"li")(35,"strong"),r(36,"Presiona y mant\xE9n"),a(),r(37," el bot\xF3n rojo para hablar"),a(),s(38,"li")(39,"strong"),r(40,"Suelta"),a(),r(41," el bot\xF3n para dejar de hablar"),a(),s(42,"li")(43,"strong"),r(44,"Alternativa:"),a(),r(45," Usa la "),s(46,"strong"),r(47,"barra espaciadora"),a(),r(48," (presiona para hablar, suelta para callar)"),a(),s(49,"li"),r(50,"Los dem\xE1s miembros ver\xE1n cuando est\xE9s hablando"),a(),s(51,"li"),r(52,"Aseg\xFArate de tener un micr\xF3fono conectado"),a(),s(53,"li"),r(54,"Funciona con mouse, pantalla t\xE1ctil y teclado"),a()()()()(),s(55,"mat-card",27)(56,"mat-card-header")(57,"mat-card-title")(58,"mat-icon"),r(59,"info"),a(),r(60," Informaci\xF3n de la Sala "),a()(),s(61,"mat-card-content")(62,"div",28)(63,"p")(64,"strong"),r(65,"Nombre:"),a(),r(66),a(),s(67,"p")(68,"strong"),r(69,"Descripci\xF3n:"),a(),r(70),a(),s(71,"p")(72,"strong"),r(73,"Creada por:"),a(),r(74),a(),s(75,"p")(76,"strong"),r(77,"Fecha de creaci\xF3n:"),a(),r(78),it(79,"date"),a(),s(80,"p")(81,"strong"),r(82,"Estado:"),a(),s(83,"mat-chip",29),r(84),a()(),s(85,"p")(86,"strong"),r(87,"Privacidad:"),a(),s(88,"mat-chip",29),r(89),a()()()()()()}if(o&2){let t=p();c(6),tt(" Miembros (",t.room.members.length,"/",t.room.maxMembers,") "),c(3),d("ngForOf",t.room.members),c(10),C("speaking",t.isSpeaking),d("color",t.isSpeaking?"warn":"primary"),c(2),F(t.isSpeaking?"stop":"mic"),c(6),d("ngIf",!t.audioActivated),c(),d("ngIf",t.isSpeaking),c(38),f(" ",t.room.name),c(4),f(" ",t.room.description),c(4),f(" ",t.room.createdBy.username),c(4),f(" ",ot(79,17,t.room.createdAt,"short")),c(5),d("color",t.room.isActive?"primary":"warn"),c(),f(" ",t.room.isActive?"Activa":"Inactiva"," "),c(4),d("color",t.room.isPrivate?"warn":"primary"),c(),f(" ",t.room.isPrivate?"Privada":"P\xFAblica"," ")}}var qt=class o{constructor(i,t,e,n,m,l){this.route=i;this.router=t;this.roomsService=e;this.authService=n;this.webSocketService=m;this.snackBar=l}room=null;currentUser;isLoading=!0;isConnected=!1;isSpeaking=!1;isLeaving=!1;speakingUsers=new Set;mediaRecorder=null;audioChunks=[];audioContext=null;audioReceivedUsers=new Set;audioActivated=!1;keyboardListeners=null;ngOnInit(){this.currentUser=this.authService.getCurrentUser(),console.log("\u{1F464} Component: Current user loaded:",this.currentUser),console.log("\u{1F464} Component: Current user ID:",this.currentUser?._id),console.log("\u{1F464} Component: Current user username:",this.currentUser?.username);let i=localStorage.getItem("user");if(console.log("\u{1F464} Component: Stored user in localStorage:",i),i){let e=JSON.parse(i);console.log("\u{1F464} Component: Parsed user from localStorage:",e)}try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),console.log("\u{1F3B5} Audio context initialized, state:",this.audioContext.state)}catch(e){console.error("\u274C Error initializing audio context:",e)}let t=this.route.snapshot.paramMap.get("id");t&&(console.log("\u{1F3E0} Component: Initializing with room ID:",t),this.loadRoom(t),this.connectWebSocket()),this.setupKeyboardListeners()}ngOnDestroy(){this.disconnectWebSocket(),this.stopRecording(),this.removeKeyboardListeners()}loadRoom(i){console.log("\u{1F3E0} Component: Loading room data for ID:",i),this.roomsService.getRoomById(i).subscribe({next:t=>{console.log("\u{1F3E0} Component: Room loaded successfully:",t),this.room=t,this.isLoading=!1,this.webSocketService.isConnected()&&(console.log("\u{1F3E0} Component: WebSocket connected, joining room:",t._id),this.webSocketService.joinRoom(t._id))},error:t=>{console.error("\u274C Component: Error loading room:",t),this.snackBar.open("Error al cargar la sala","Cerrar",{duration:3e3}),this.router.navigate(["/rooms"])}})}connectWebSocket(){console.log("\u{1F50C} Component: Connecting WebSocket..."),this.webSocketService.connect(),this.webSocketService.connectionStatus$.subscribe(i=>{console.log("\u{1F50C} Component: Connection status changed:",i),this.isConnected=i,i&&this.room&&(console.log("\u{1F50C} Component: Joining room via WebSocket:",this.room._id),this.webSocketService.joinRoom(this.room._id))}),this.webSocketService.speakingEvent$.subscribe(i=>{console.log("\u{1F3A4} Component: Received speaking event:",i),console.log("\u{1F3A4} Component: Current room ID:",this.room?._id),console.log("\u{1F3A4} Component: Event room ID:",i.roomId),console.log("\u{1F3A4} Component: Room ID match:",i.roomId===this.room?._id),i.roomId===this.room?._id?(i.isSpeaking?(console.log("\u{1F3A4} Component: Adding user to speaking list:",i.username),this.speakingUsers.add(i.username)):(console.log("\u{1F507} Component: Removing user from speaking list:",i.username),this.speakingUsers.delete(i.username)),console.log("\u{1F3A4} Component: Current speaking users:",Array.from(this.speakingUsers))):console.log("\u{1F3A4} Component: Event ignored - room ID mismatch")}),this.webSocketService.audioData$.subscribe(i=>{console.log("\u{1F3B5} Component: Received audio data from:",i.username),console.log("\u{1F3B5} Component: Audio data room ID:",i.roomId),console.log("\u{1F3B5} Component: Current room ID:",this.room?._id),console.log("\u{1F3B5} Component: Audio blob size:",i.audioBlob.size),console.log("\u{1F3B5} Component: Current user ID:",this.currentUser?._id),console.log("\u{1F3B5} Component: Audio user ID:",i.userId);let t=this.currentUser?._id?i.userId!==this.currentUser._id:!0;i.roomId===this.room?._id&&t?(console.log("\u{1F3B5} Component: Playing received audio..."),this.playAudio(i.audioBlob,i.username),this.audioReceivedUsers.add(i.username),setTimeout(()=>{this.audioReceivedUsers.delete(i.username)},1e3)):(console.log("\u{1F3B5} Component: Audio ignored - room mismatch or own audio"),console.log("\u{1F3B5} Component: Room match:",i.roomId===this.room?._id),console.log("\u{1F3B5} Component: Not own audio:",t))}),console.log("\u{1F464} Component: Setting up user joined subscription..."),this.webSocketService.userJoined$.subscribe(i=>{console.log("\u{1F464} Component: Received user joined event:",i),console.log("\u{1F464} Component: Current room ID:",this.room?._id),console.log("\u{1F464} Component: Event room ID:",i.roomId),i.roomId===this.room?._id?(console.log("\u{1F464} Component: User joined room:",i.username),this.snackBar.open(`${i.username} se uni\xF3 a la sala`,"Cerrar",{duration:2e3}),this.refreshRoomData()):console.log("\u{1F464} Component: User joined event ignored - room ID mismatch")}),console.log("\u{1F44B} Component: Setting up user left subscription..."),this.webSocketService.userLeft$.subscribe(i=>{console.log("\u{1F44B} Component: Received user left event:",i),console.log("\u{1F44B} Component: Current room ID:",this.room?._id),console.log("\u{1F44B} Component: Event room ID:",i.roomId),i.roomId===this.room?._id?(console.log("\u{1F44B} Component: User left room:",i.username),this.snackBar.open(`${i.username} sali\xF3 de la sala`,"Cerrar",{duration:2e3}),this.refreshRoomData()):console.log("\u{1F44B} Component: User left event ignored - room ID mismatch")})}disconnectWebSocket(){this.room&&this.webSocketService.isConnected()&&!this.isLeaving?(console.log("\u{1F50C} Disconnecting WebSocket and leaving room:",this.room._id),this.webSocketService.leaveRoom(this.room._id)):console.log("\u{1F50C} Disconnecting WebSocket (no room, not connected, or already leaving)"),this.webSocketService.disconnect()}startSpeaking(){return $(this,null,function*(){if(this.isSpeaking){console.log("\u{1F3A4} Already speaking, ignoring start request");return}try{console.log("\u{1F3A4} Requesting microphone permission..."),this.audioActivated||(console.log("\u{1F3B5} Auto-activating audio on start speaking..."),this.activateAudio());let i=yield navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});console.log("\u2705 Microphone permission granted, creating MediaRecorder...");let t=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":"audio/webm";this.mediaRecorder=new MediaRecorder(i,{mimeType:t}),this.audioChunks=[],this.mediaRecorder.ondataavailable=e=>{console.log("\u{1F3B5} MediaRecorder: Data available, size:",e.data.size),e.data.size>0&&(this.audioChunks.push(e.data),console.log("\u{1F3B5} MediaRecorder: Added chunk, total chunks:",this.audioChunks.length))},this.mediaRecorder.onstop=()=>{console.log("\u{1F3B5} MediaRecorder: Stopped, processing audio chunks..."),console.log("\u{1F3B5} MediaRecorder: Total chunks:",this.audioChunks.length);let e=new Blob(this.audioChunks,{type:t});console.log("\u{1F3B5} MediaRecorder: Created blob, size:",e.size),this.room?(console.log("\u{1F3B5} MediaRecorder: Sending audio data to room:",this.room._id),this.webSocketService.sendAudioData(this.room._id,e)):console.error("\u274C MediaRecorder: No room available to send audio"),this.audioChunks=[]},this.mediaRecorder.onerror=e=>{console.error("\u274C MediaRecorder error:",e),this.snackBar.open("Error en la grabaci\xF3n de audio","Cerrar",{duration:3e3}),this.isSpeaking=!1},this.mediaRecorder.start(50),this.isSpeaking=!0,this.room&&(console.log("\u{1F3A4} Emitting start-speaking event..."),this.webSocketService.startSpeaking(this.room._id)),console.log("\u{1F3A4} Speaking started successfully")}catch(i){console.error("\u274C Error accessing microphone:",i),this.isSpeaking=!1,i.name==="NotAllowedError"?this.snackBar.open("Permiso de micr\xF3fono denegado. Por favor, permite el acceso al micr\xF3fono.","Cerrar",{duration:5e3}):i.name==="NotFoundError"?this.snackBar.open("No se encontr\xF3 ning\xFAn micr\xF3fono. Verifica que tengas un micr\xF3fono conectado.","Cerrar",{duration:5e3}):this.snackBar.open(`Error al acceder al micr\xF3fono: ${i.message}`,"Cerrar",{duration:3e3})}})}stopSpeaking(){if(!this.isSpeaking){console.log("\u{1F507} Not speaking, ignoring stop request");return}console.log("\u{1F507} Stopping speaking..."),this.mediaRecorder&&this.mediaRecorder.state!=="inactive"&&(this.mediaRecorder.stop(),this.mediaRecorder.stream.getTracks().forEach(i=>i.stop())),this.isSpeaking=!1,this.room&&this.webSocketService.stopSpeaking(this.room._id),console.log("\u{1F507} Speaking stopped successfully")}stopRecording(){this.mediaRecorder&&this.mediaRecorder.state!=="inactive"&&(this.mediaRecorder.stop(),this.mediaRecorder.stream.getTracks().forEach(i=>i.stop()))}leaveRoom(){this.room&&!this.isLeaving&&(this.isLeaving=!0,this.webSocketService.leaveRoom(this.room._id),this.roomsService.leaveRoom(this.room._id).subscribe({next:()=>{this.snackBar.open("Saliste de la sala","Cerrar",{duration:2e3}),this.router.navigate(["/rooms"])},error:i=>{console.error("Error leaving room via HTTP:",i),this.snackBar.open("Saliste de la sala","Cerrar",{duration:2e3}),this.router.navigate(["/rooms"])}}))}isUserInRoom(){return!this.room||!this.currentUser?!1:this.room.members.some(i=>i._id===this.currentUser._id)}getConnectionStatusColor(){return this.isConnected?"green":"red"}isUserAdmin(i){return this.room?.admins.some(t=>t._id===i._id)||!1}goBack(){console.log("\u{1F519} [Room] User navigating back (keeping WebSocket connection)"),this.router.navigate(["/rooms"])}refreshRoomData(){this.room&&this.loadRoom(this.room._id)}playAudio(i,t){try{console.log("\u{1F3B5} Playing audio from:",t),console.log("\u{1F3B5} Audio activated flag:",this.audioActivated),console.log("\u{1F3B5} Audio context state:",this.audioContext?.state);let e=new Audio,n=URL.createObjectURL(i);if(e.src=n,e.volume=.8,e.onended=()=>{URL.revokeObjectURL(n),console.log("\u{1F3B5} Audio finished, cleaned up URL")},e.onerror=m=>{console.error("\u274C Audio element error:",m),URL.revokeObjectURL(n)},!this.audioActivated){console.log("\u{1F3B5} Audio not activated yet, showing activation message..."),this.snackBar.open(`Audio recibido de ${t}. Haz clic en "Activar Audio" para escuchar.`,"Activar Audio",{duration:8e3,panelClass:["audio-notification"]}).onAction().subscribe(()=>{this.activateAudio(),setTimeout(()=>{e.play().then(()=>{console.log("\u{1F3B5} Audio playing successfully after activation")}).catch(m=>{console.error("\u274C Still cannot play audio after activation:",m),URL.revokeObjectURL(n)})},200)});return}e.play().then(()=>{console.log("\u{1F3B5} Audio playing successfully")}).catch(m=>{console.error("\u274C Error playing audio:",m),m.name==="NotAllowedError"?(console.log("\u{1F3B5} Autoplay policy blocked, showing user message..."),this.snackBar.open(`Audio recibido de ${t}. Haz clic en "Activar Audio" para escuchar.`,"Activar Audio",{duration:5e3,panelClass:["audio-notification"]}).onAction().subscribe(()=>{this.activateAudio(),setTimeout(()=>{e.play().catch(l=>{console.error("\u274C Still cannot play audio after user interaction:",l),URL.revokeObjectURL(n)})},100)})):URL.revokeObjectURL(n)})}catch(e){console.error("\u274C Error creating audio element:",e)}}activateAudio(){if(console.log("\u{1F3B5} Activating audio..."),console.log("\u{1F3B5} Current audio context state:",this.audioContext?.state),console.log("\u{1F3B5} Current audio activated flag:",this.audioActivated),!this.audioContext)try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),console.log("\u{1F3B5} Created new audio context, state:",this.audioContext.state)}catch(i){console.error("\u274C Error creating audio context:",i),this.snackBar.open("Error al crear contexto de audio","Cerrar",{duration:3e3});return}if(this.audioContext.state==="suspended")this.audioContext.resume().then(()=>{console.log("\u{1F3B5} Audio context resumed successfully"),this.audioActivated=!0,this.snackBar.open("Audio activado correctamente","Cerrar",{duration:2e3})}).catch(i=>{console.error("\u274C Error resuming audio context:",i),this.snackBar.open("Error al activar audio","Cerrar",{duration:3e3})});else if(this.audioContext.state==="running")console.log("\u{1F3B5} Audio context already running"),this.audioActivated=!0,this.snackBar.open("Audio ya est\xE1 activado","Cerrar",{duration:2e3});else{console.log("\u{1F3B5} Audio context closed, creating new one...");try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.audioActivated=!0,this.snackBar.open("Audio activado correctamente","Cerrar",{duration:2e3})}catch(i){console.error("\u274C Error creating new audio context:",i),this.snackBar.open("Error al crear contexto de audio","Cerrar",{duration:3e3})}}}onUserInteraction(){this.audioActivated||(console.log("\u{1F3B5} User interaction detected, auto-activating audio..."),this.activateAudio())}testAudio(){console.log("\u{1F9EA} Testing audio functionality..."),this.audioActivated||(console.log("\u{1F3B5} Auto-activating audio on test audio..."),this.activateAudio());try{let i=new(window.AudioContext||window.webkitAudioContext),t=i.createOscillator(),e=i.createGain(),n=i.createMediaStreamDestination();t.connect(e),e.connect(n),t.frequency.setValueAtTime(440,i.currentTime),e.gain.setValueAtTime(.1,i.currentTime);let m=n.stream,l=new MediaRecorder(m,{mimeType:"audio/webm;codecs=opus"}),q=[];l.ondataavailable=S=>{console.log("\u{1F9EA} Test audio data available, size:",S.data.size),S.data.size>0&&q.push(S.data)},l.onstop=()=>{let S=new Blob(q,{type:"audio/webm;codecs=opus"});console.log("\u{1F9EA} Test audio blob created, size:",S.size),this.room&&(console.log("\u{1F9EA} Sending test audio to room:",this.room._id),this.webSocketService.sendAudioData(this.room._id,S))},l.start(),t.start(i.currentTime),t.stop(i.currentTime+1),setTimeout(()=>{l.stop(),i.close()},1100)}catch(i){console.error("\u274C Error creating test audio:",i),this.snackBar.open("Error al crear audio de prueba","Cerrar",{duration:3e3})}}setupKeyboardListeners(){let i=e=>{e.code==="Space"&&!this.isSpeaking&&(e.preventDefault(),this.startSpeaking())},t=e=>{e.code==="Space"&&this.isSpeaking&&(e.preventDefault(),this.stopSpeaking())};document.addEventListener("keydown",i),document.addEventListener("keyup",t),this.keyboardListeners={handleKeyDown:i,handleKeyUp:t}}removeKeyboardListeners(){this.keyboardListeners&&(document.removeEventListener("keydown",this.keyboardListeners.handleKeyDown),document.removeEventListener("keyup",this.keyboardListeners.handleKeyUp))}static \u0275fac=function(t){return new(t||o)(w(ct),w(mt),w(jt),w(lt),w(Ut),w(Pt))};static \u0275cmp=A({type:o,selectors:[["app-room-chat"]],decls:22,vars:8,consts:[[1,"chat-container",3,"click"],["color","primary",1,"chat-header"],["mat-icon-button","","matTooltip","Volver a salas (mantener conexi\xF3n)",3,"click"],[1,"room-info"],[1,"room-name"],[1,"room-description"],[1,"spacer"],[1,"connection-status"],[1,"status-text"],["mat-icon-button","","matTooltip","Salir completamente de la sala",3,"click"],[1,"chat-content"],["class","loading-container",4,"ngIf"],["class","room-content",4,"ngIf"],[1,"loading-container"],["diameter","50"],[1,"room-content"],[1,"members-card"],["class","member-item",4,"ngFor","ngForOf"],[1,"controls-card"],[1,"voice-controls"],[1,"control-buttons"],["mat-fab","","matTooltip","Presiona y mant\xE9n para hablar",1,"speak-button",3,"mousedown","mouseup","mouseleave","touchstart","touchend","color"],[1,"test-controls"],["mat-raised-button","","color","accent","matTooltip","Generar audio de prueba",3,"click"],["mat-raised-button","","color","warn","matTooltip","Activar audio (requerido para escuchar en Chrome)","class","activate-audio-button",3,"click",4,"ngIf"],["class","speaking-indicator",4,"ngIf"],[1,"instructions"],[1,"info-card"],[1,"room-details"],["selected","",3,"color"],[1,"member-item"],["matListItemIcon",""],["matListItemTitle","",1,"member-name"],["color","accent","selected","","class","speaking-chip",4,"ngIf"],["color","primary","selected","","class","audio-received-chip",4,"ngIf"],["color","warn","selected","","class","admin-chip",4,"ngIf"],["color","accent","selected","",1,"speaking-chip"],["color","primary","selected","",1,"audio-received-chip"],["color","warn","selected","",1,"admin-chip"],["mat-raised-button","","color","warn","matTooltip","Activar audio (requerido para escuchar en Chrome)",1,"activate-audio-button",3,"click"],[1,"speaking-indicator"],[1,"pulse"]],template:function(t,e){t&1&&(s(0,"div",0),b("click",function(){return e.onUserInteraction()}),s(1,"mat-toolbar",1)(2,"button",2),b("click",function(){return e.goBack()}),s(3,"mat-icon"),r(4,"arrow_back"),a()(),s(5,"div",3)(6,"span",4),r(7),a(),s(8,"span",5),r(9),a()(),D(10,"span",6),s(11,"div",7)(12,"mat-icon"),r(13),a(),s(14,"span",8),r(15),a()(),s(16,"button",9),b("click",function(){return e.leaveRoom()}),s(17,"mat-icon"),r(18,"exit_to_app"),a()()(),s(19,"div",10),y(20,se,4,0,"div",11)(21,ge,90,20,"div",12),a()()),t&2&&(c(7),F(e.room==null?null:e.room.name),c(2),F(e.room==null?null:e.room.description),c(3),Y("color",e.getConnectionStatusColor()),c(),f(" ",e.isConnected?"wifi":"wifi_off"," "),c(2),F(e.isConnected?"Conectado":"Desconectado"),c(5),d("ngIf",e.isLoading),c(),d("ngIf",!e.isLoading&&e.room))},dependencies:[st,nt,at,rt,xt,ut,ft,vt,bt,It,Ot,Mt,At,Tt,Rt,Et,Lt,Bt,Ft,zt,Dt,Wt,Kt,Ht,W,H],styles:[".chat-container[_ngcontent-%COMP%]{min-height:100vh;background:#f5f5f5}.chat-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000;box-shadow:0 2px 8px #0000001a}.room-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:16px}.room-info[_ngcontent-%COMP%]   .room-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500}.room-info[_ngcontent-%COMP%]   .room-description[_ngcontent-%COMP%]{font-size:.8rem;opacity:.8}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.connection-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-right:16px}.connection-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{font-size:.9rem}.chat-content[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;gap:16px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.1rem}.room-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:24px}@media (max-width: 768px){.room-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}.members-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 12px #0000001a}.members-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.member-item[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.member-item[_ngcontent-%COMP%]   .speaking-chip[_ngcontent-%COMP%]{font-size:.7rem;height:20px}.member-item[_ngcontent-%COMP%]   .audio-received-chip[_ngcontent-%COMP%]{font-size:.7rem;height:20px;animation:_ngcontent-%COMP%_audioReceived 1s ease-in-out}.member-item[_ngcontent-%COMP%]   .admin-chip[_ngcontent-%COMP%]{font-size:.7rem;height:20px}.controls-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 12px #0000001a}.controls-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.voice-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:24px;padding:32px 0}.control-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center}.test-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:16px;gap:16px;flex-wrap:wrap}.activate-audio-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff9800,#f57c00)!important;color:#fff!important;font-weight:500!important;box-shadow:0 4px 12px #ff98004d!important;transition:all .3s ease!important;animation:_ngcontent-%COMP%_activateAudioPulse 2s infinite!important}.activate-audio-button[_ngcontent-%COMP%]:hover{transform:scale(1.05)!important;box-shadow:0 6px 16px #ff980066!important}.activate-audio-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}@keyframes _ngcontent-%COMP%_activateAudioPulse{0%{box-shadow:0 4px 12px #ff98004d}50%{box-shadow:0 6px 16px #ff980080}to{box-shadow:0 4px 12px #ff98004d}}  .audio-notification{background:linear-gradient(135deg,#2196f3,#1976d2)!important;color:#fff!important}  .audio-notification .mat-simple-snackbar-action{color:gold!important;font-weight:600!important}.audio-received-chip[_ngcontent-%COMP%]{font-size:.7rem;height:20px;animation:_ngcontent-%COMP%_audioReceived 1s ease-in-out;background:linear-gradient(135deg,#4caf50,#45a049)!important;color:#fff!important}.speak-button[_ngcontent-%COMP%]{width:80px!important;height:80px!important;background:linear-gradient(135deg,#4caf50,#45a049)!important;box-shadow:0 4px 16px #4caf504d;transition:all .3s ease;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.speak-button[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 6px 20px #4caf5066}.speak-button[_ngcontent-%COMP%]:active{transform:scale(.95);box-shadow:0 2px 8px #4caf5080}.speak-button.speaking[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f44336,#d32f2f)!important;box-shadow:0 4px 16px #f443364d;animation:_ngcontent-%COMP%_pulse 1.5s infinite;transform:scale(1.05)}.speak-button.speaking[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 6px 20px #f4433666}.speak-button.speaking[_ngcontent-%COMP%]:active{transform:scale(.95);box-shadow:0 2px 8px #f4433680}.speak-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2rem;width:2rem;height:2rem}.stop-button[_ngcontent-%COMP%]{width:80px!important;height:80px!important;background:linear-gradient(135deg,#f44336,#d32f2f)!important;box-shadow:0 4px 16px #f443364d;animation:_ngcontent-%COMP%_pulse 1.5s infinite}.stop-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2rem;width:2rem;height:2rem}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);box-shadow:0 4px 16px #f443364d}50%{transform:scale(1.05);box-shadow:0 6px 20px #f4433680}to{transform:scale(1);box-shadow:0 4px 16px #f443364d}}@keyframes _ngcontent-%COMP%_audioReceived{0%{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.8}to{transform:scale(1);opacity:1}}.speaking-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#f44336;font-weight:500}.speaking-indicator[_ngcontent-%COMP%]   .pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1s infinite;color:#f44336}.instructions[_ngcontent-%COMP%]{margin-top:24px;padding:16px;background:#f8f9fa;border-radius:8px;border-left:4px solid #1976d2}.instructions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px;color:#333}.instructions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.instructions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;color:#666;line-height:1.4}.info-card[_ngcontent-%COMP%]{grid-column:1/-1;border-radius:12px;box-shadow:0 4px 12px #0000001a}.info-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.room-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;display:flex;align-items:center;gap:8px}.room-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{min-width:120px;color:#333}.room-details[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:.8rem;height:24px}@media (max-width: 768px){.chat-content[_ngcontent-%COMP%]{padding:16px}.room-content[_ngcontent-%COMP%]{gap:16px}.voice-controls[_ngcontent-%COMP%]{padding:24px 0}.speak-button[_ngcontent-%COMP%], .stop-button[_ngcontent-%COMP%]{width:70px!important;height:70px!important}.speak-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .stop-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.5rem;width:1.5rem;height:1.5rem}.room-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.room-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{min-width:auto}}@media (max-width: 480px){.chat-header[_ngcontent-%COMP%]   .room-info[_ngcontent-%COMP%]   .room-name[_ngcontent-%COMP%]{font-size:1rem}.chat-header[_ngcontent-%COMP%]   .room-info[_ngcontent-%COMP%]   .room-description[_ngcontent-%COMP%]{font-size:.7rem}.chat-header[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{display:none}.speak-button[_ngcontent-%COMP%], .stop-button[_ngcontent-%COMP%]{width:60px!important;height:60px!important}.speak-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .stop-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.2rem;width:1.2rem;height:1.2rem}}"]})};export{qt as RoomChatComponent};
